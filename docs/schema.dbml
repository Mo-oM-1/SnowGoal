// SnowGoal - Data Model (SILVER Layer)
// Paste this into https://dbdiagram.io to visualize

Table COMPETITIONS {
  COMPETITION_CODE varchar [pk]
  COMPETITION_ID int
  COMPETITION_NAME varchar
  TYPE varchar
  EMBLEM varchar
  AREA_NAME varchar
  AREA_CODE varchar
  AREA_FLAG varchar
  CURRENT_SEASON_ID int
  SEASON_START date
  SEASON_END date
  CURRENT_MATCHDAY int
  _LOADED_AT timestamp
  _UPDATED_AT timestamp
}

Table TEAMS {
  TEAM_ID int [pk]
  COMPETITION_CODE varchar
  TEAM_NAME varchar
  TEAM_SHORT varchar
  TEAM_TLA varchar
  TEAM_CREST varchar
  ADDRESS varchar
  WEBSITE varchar
  FOUNDED int
  CLUB_COLORS varchar
  VENUE varchar
  COACH_ID int
  COACH_NAME varchar
  COACH_NATIONALITY varchar
  _LOADED_AT timestamp
  _UPDATED_AT timestamp
}

Table MATCHES {
  MATCH_ID int [pk]
  COMPETITION_CODE varchar [ref: > COMPETITIONS.COMPETITION_CODE]
  SEASON_YEAR int
  MATCH_DATE timestamp
  STATUS varchar
  MATCHDAY int
  STAGE varchar
  HOME_TEAM_ID int [ref: > TEAMS.TEAM_ID]
  HOME_TEAM_NAME varchar
  HOME_TEAM_SHORT varchar
  HOME_TEAM_TLA varchar
  AWAY_TEAM_ID int [ref: > TEAMS.TEAM_ID]
  AWAY_TEAM_NAME varchar
  AWAY_TEAM_SHORT varchar
  AWAY_TEAM_TLA varchar
  HOME_SCORE int
  AWAY_SCORE int
  HOME_SCORE_HT int
  AWAY_SCORE_HT int
  WINNER varchar
  REFEREE_NAME varchar
  REFEREE_NATIONALITY varchar [note: 'NEW: Nationalité arbitre']
  REFEREE_ID int [note: 'NEW: ID arbitre']
  MATCH_DURATION varchar [note: 'NEW: REGULAR/EXTRA_TIME/PENALTY']
  AREA_NAME varchar [note: 'NEW: Nom du pays']
  AREA_CODE varchar [note: 'NEW: Code ISO pays']
  DAY_OF_WEEK varchar [note: 'NEW: Jour semaine (Mon-Sun)']
  MATCH_HOUR int [note: 'NEW: Heure match UTC (0-23)']
  CURRENT_MATCHDAY int [note: 'NEW: Journée compétition']
  LAST_UPDATED timestamp
  _LOADED_AT timestamp
  _UPDATED_AT timestamp
}

Table STANDINGS {
  TEAM_ID int [pk, ref: > TEAMS.TEAM_ID]
  COMPETITION_CODE varchar [pk, ref: > COMPETITIONS.COMPETITION_CODE]
  SEASON_YEAR int [pk]
  POSITION int
  TEAM_NAME varchar
  TEAM_SHORT varchar
  TEAM_TLA varchar
  TEAM_CREST varchar
  PLAYED int
  WON int
  DRAW int
  LOST int
  POINTS int
  GOALS_FOR int
  GOALS_AGAINST int
  GOAL_DIFF int
  FORM varchar
  _LOADED_AT timestamp
  _UPDATED_AT timestamp
}

Table SCORERS {
  PLAYER_ID int [pk]
  COMPETITION_CODE varchar [pk, ref: > COMPETITIONS.COMPETITION_CODE]
  SEASON_YEAR int [pk]
  PLAYER_NAME varchar
  FIRST_NAME varchar
  LAST_NAME varchar
  NATIONALITY varchar
  POSITION varchar
  DATE_OF_BIRTH date
  TEAM_ID int [ref: > TEAMS.TEAM_ID]
  TEAM_NAME varchar
  TEAM_SHORT varchar
  GOALS int
  ASSISTS int
  PENALTIES int
  PLAYED_MATCHES int
  _LOADED_AT timestamp
  _UPDATED_AT timestamp
}

// ============================================
// GOLD LAYER - Analytics Tables
// ============================================

Table MATCH_PATTERNS {
  COMPETITION_CODE varchar
  DAY_OF_WEEK varchar
  MATCH_HOUR int
  TOTAL_MATCHES int
  AVG_TOTAL_GOALS decimal
  AVG_HOME_GOALS decimal
  AVG_AWAY_GOALS decimal
  EXTRA_TIME_MATCHES int
  HOME_WINS int
  AWAY_WINS int
  DRAWS int

  Note: 'Analyse temporelle des matchs (patterns par jour/heure)'
}

Table REFEREE_STATS {
  REFEREE_NAME varchar
  REFEREE_NATIONALITY varchar
  REFEREE_ID int
  MATCHES_REFEREED int
  COMPETITIONS int
  SEASONS int
  AVG_GOALS_PER_MATCH decimal
  EXTRA_TIME_MATCHES int
  EXTRA_TIME_PCT decimal

  Note: 'Statistiques des arbitres (activité, prolongations)'
}

Table GEOGRAPHIC_STATS {
  AREA_NAME varchar
  AREA_CODE varchar
  COMPETITIONS int
  TOTAL_MATCHES int
  AVG_GOALS_PER_MATCH decimal
  HOME_WINS int
  AWAY_WINS int
  DRAWS int
  HOME_WIN_PCT decimal

  Note: 'Analyse géographique (home advantage par pays)'
}
